<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="èƒŒä¹¦ç­–ç•¥ å®˜æ–¹æ–‡æ¡£ï¼šEndorsement policies ã€‚ã€‚ã€‚çœç•¥éƒ¨åˆ† Setting chaincode-level endorsement policies(è®¾ç½®é“¾ç çº§åˆ«çš„èƒŒä¹¦ç­–ç•¥) Chaincode-level endorsement policies are agreed to by channel members when they approve a chaincode def">
<meta property="og:type" content="article">
<meta property="og:title" content="èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰">
<meta property="og:url" content="https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/index.html">
<meta property="og:site_name" content="æ»´æ°´æˆæ¶“">
<meta property="og:description" content="èƒŒä¹¦ç­–ç•¥ å®˜æ–¹æ–‡æ¡£ï¼šEndorsement policies ã€‚ã€‚ã€‚çœç•¥éƒ¨åˆ† Setting chaincode-level endorsement policies(è®¾ç½®é“¾ç çº§åˆ«çš„èƒŒä¹¦ç­–ç•¥) Chaincode-level endorsement policies are agreed to by channel members when they approve a chaincode def">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-11-22T06:32:06.493Z">
<meta property="article:modified_time" content="2024-11-22T06:32:06.493Z">
<meta property="article:author" content="guozhe">
<meta property="article:tag" content="blockchain">
<meta property="article:tag" content="Hyperledger-Fabric">
<meta property="article:tag" content="Endorsement policies">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="æ»´æ°´æˆæ¶“" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a href="/tags/">æ ‡ç­¾</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/guozhe001">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2024/11/22/blockchain/ethereum/%E6%A6%82%E5%BF%B5%E5%AD%A6%E4%B9%A0/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E4%B8%AD%E7%9A%84token/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2024/11/22/blockchain/ethereum/audit/CERTIK%E9%92%88%E5%AF%B9SOLO.TOP%E7%9A%84%E5%AE%A1%E8%AE%A1%E6%8A%A5%E5%91%8A%E5%AD%A6%E4%B9%A0/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&text=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&is_video=false&description=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰&body=Check out this article: https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&name=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&t=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5"><span class="toc-number">1.</span> <span class="toc-text">èƒŒä¹¦ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-chaincode-level-endorsement-policies-%E8%AE%BE%E7%BD%AE%E9%93%BE%E7%A0%81%E7%BA%A7%E5%88%AB%E7%9A%84%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5"><span class="toc-number">1.1.</span> <span class="toc-text">Setting chaincode-level endorsement policies(è®¾ç½®é“¾ç çº§åˆ«çš„èƒŒä¹¦ç­–ç•¥)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E9%AA%8C%E8%AF%81"><span class="toc-number">1.1.1.</span> <span class="toc-text">ä¸ªäººéªŒè¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Endorsement-policy-syntax%EF%BC%88%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5%E7%9A%84%E8%AF%AD%E6%B3%95%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">Endorsement policy syntaxï¼ˆèƒŒä¹¦ç­–ç•¥çš„è¯­æ³•ï¼‰</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">guozhe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-11-22T06:32:06.493Z" itemprop="datePublished">2024-11-22</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/">blockchain</a> â€º <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/">Hyperledger-Fabric</a> â€º <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/HOW-TO/">HOW-TO</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Endorsement-policies/" rel="tag">Endorsement policies</a>, <a class="tag-link-link" href="/tags/Hyperledger-Fabric/" rel="tag">Hyperledger-Fabric</a>, <a class="tag-link-link" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag">blockchain</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="èƒŒä¹¦ç­–ç•¥">èƒŒä¹¦ç­–ç•¥</h1>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/endorsement-policies.html#endorsement-policy-syntax">Endorsement policies</a></p>
<p>ã€‚ã€‚ã€‚çœç•¥éƒ¨åˆ†</p>
<h2 id="Setting-chaincode-level-endorsement-policies-è®¾ç½®é“¾ç çº§åˆ«çš„èƒŒä¹¦ç­–ç•¥">Setting chaincode-level endorsement policies(è®¾ç½®é“¾ç çº§åˆ«çš„èƒŒä¹¦ç­–ç•¥)</h2>
<p>Chaincode-level endorsement policies are agreed to by channel members when they approve a chaincode definition for their organization. A sufficient number of channel members need to approve a chaincode definition to meet the <code>Channel/Application/LifecycleEndorsement</code> policy, which by default is set to a majority of channel members, before the definition can be committed to the channel. Once the definition has been committed, the chaincode is ready to use. Any invoke of the chaincode that writes data to the ledger will need to be validated by enough channel members to meet the endorsement policy.</p>
<p>é€šé“æˆå‘˜åœ¨ä¸ºå…¶ç»„ç»‡æ‰¹å‡†é“¾ç å®šä¹‰æ—¶ï¼Œä¼šåŒæ„é“¾ç çº§è®¤å¯ç­–ç•¥ã€‚éœ€è¦è¶³å¤Ÿæ•°é‡çš„é€šé“æˆå‘˜æ‰¹å‡†é“¾ç å®šä¹‰æ‰èƒ½æ»¡è¶³Channel / Application / LifecycleEndorsementç­–ç•¥ï¼Œè¯¥ç­–ç•¥é»˜è®¤æƒ…å†µä¸‹è®¾ç½®ä¸ºå¤§å¤šæ•°é€šé“æˆå‘˜ï¼Œç„¶åæ‰èƒ½å°†é“¾ç å®šä¹‰æäº¤ç»™é€šé“ã€‚æäº¤å®šä¹‰åï¼Œä¾¿å¯ä»¥ä½¿ç”¨é“¾ç äº†ã€‚ä»»ä½•å°†æ•°æ®å†™å…¥è´¦æœ¬çš„é“¾ç çš„è°ƒç”¨éƒ½éœ€è¦ç”±è¶³å¤Ÿçš„é€šé“æˆå‘˜æ¥éªŒè¯ï¼Œä»¥æ»¡è¶³èƒŒä¹¦ç­–ç•¥ã€‚</p>
<p>You can specify an endorsement policy for a chaincode using the Fabric SDKs. For an example, visit the <a target="_blank" rel="noopener" href="https://hyperledger.github.io/fabric-sdk-node/master/tutorial-chaincode-lifecycle.html">How to install and start your chaincode</a> in the Node.js SDK documentation. You can also create an endorsement policy from your CLI when you approve and commit a chaincode definition with the Fabric peer binaries by using the <code>--signature-policy</code> flag.</p>
<p>ä½ å¯ä»¥ä½¿ç”¨Fabric SDKsæ¥ä¸ºé“¾ç æŒ‡å®šèƒŒä¹¦ç­–ç•¥ï¼Œè®¿é—®<a target="_blank" rel="noopener" href="https://hyperledger.github.io/fabric-sdk-node/master/tutorial-chaincode-lifecycle.html">How to install and start your chaincode</a>æ¥æŸ¥çœ‹ä½¿ç”¨Node.js SDKçš„æ–‡æ¡£ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡CLIåœ¨æ‰¹å‡†å’Œæäº¤é“¾ç å®šä¹‰æ—¶æ¥åˆ›å»ºèƒŒä¹¦ç­–ç•¥ï¼Œä½¿ç”¨Fabricçš„peerå¯æ‰§è¡Œç¨‹åºæ—¶ä½¿ç”¨ <code>--signature-policy</code> æ ‡å¿—æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>For exampleï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg --channelID mychannel --signature-policy &quot;AND(&#x27;Org1.member&#x27;, &#x27;Org2.member&#x27;)&quot; --name mycc --version 1.0 --package-id mycc_1:3a8c52d70c36313cfebbaf09d8616e7a6318ababa01c7cbe40603c373bcfe173 --sequence 1 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent</span><br></pre></td></tr></table></figure>
<p>The above command approves the chaincode definition of <code>mycc</code> with the policy <code>AND('Org1.member', 'Org2.member')</code> which would require that a member of both Org1 and Org2 sign the transaction. After a sufficient number of channel members approve a chaincode definition for <code>mycc</code>, the definition and endorsement policy can be committed to the channel using the command below:</p>
<p>ä¸Šé¢çš„å‘½ä»¤ä½¿ç”¨ <code>AND('Org1.member', 'Org2.member')</code> ç­–ç•¥æ¥æ‰¹å‡†<code>mycc</code>çš„é“¾ç å®šä¹‰ï¼Œè¿™ä¸ªç­–ç•¥è¦æ±‚Org1å’ŒOrg2çš„æˆå‘˜éƒ½éœ€è¦å¯¹ä¸€ç¬”äº¤æ˜“è¿›è¡Œç­¾åã€‚åœ¨æœ‰è¶³å¤Ÿçš„é€šé“æˆå‘˜æ‰¹å‡†äº†<code>mycc</code>çš„é“¾ç å®šä¹‰ä¹‹åï¼Œè¿™ä¸ªå®šä¹‰å’ŒèƒŒä¹¦ç­–ç•¥å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¢«æäº¤åˆ°é€šé“äº†ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode commit -o orderer.example.com:7050 --channelID mychannel --signature-policy &quot;AND(&#x27;Org1.member&#x27;, &#x27;Org2.member&#x27;)&quot; --name mycc --version 1.0 --sequence 1 --init-required --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt</span><br></pre></td></tr></table></figure>
<p>Notice that, if the identity classification is enabled (see <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/msp.html">Membership Service Providers (MSP)</a>), one can use the <code>PEER</code> role to restrict endorsement to only peers.</p>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœå¯ç”¨äº†èº«ä»½åˆ†ç±»ï¼ˆè¯·å‚é˜… <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/msp.html">Membership Service Providers (MSP)</a>ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>PEER</code>è§’è‰²å°†èƒŒä¹¦é™åˆ¶ä¸ºä»…peerèŠ‚ç‚¹ã€‚</p>
<p>For example:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg --channelID mychannel --signature-policy &quot;AND(&#x27;Org1.peer&#x27;, &#x27;Org2.peer&#x27;)&quot; --name mycc --version 1.0 --package-id mycc_1:3a8c52d70c36313cfebbaf09d8616e7a6318ababa01c7cbe40603c373bcfe173 --sequence 1 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent</span><br></pre></td></tr></table></figure>
<p>In addition to the specifying an endorsement policy from the CLI or SDK, a chaincode can also use policies in the channel configuration as endorsement policies. You can use the <code>--channel-config-policy</code> flag to select a channel policy with format used by the channel configuration and by ACLs.</p>
<p>é™¤äº†ä»CLIæˆ–SDKä¸­æŒ‡å®šèƒŒä¹¦ç­–ç•¥ä»¥å¤–ï¼Œé“¾ç è¿˜å¯ä»¥ä½¿ç”¨é€šé“é…ç½®ä¸­çš„ç­–ç•¥ä½œä¸ºèƒŒä¹¦ç­–ç•¥ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>--channel-config-policy</code>æ ‡å¿—æ¥é€‰æ‹©ä¸€ä¸ªé€šé“ç­–ç•¥ï¼Œå…¶æ ¼å¼ç”±é€šé“é…ç½®å’ŒACLä½¿ç”¨ã€‚</p>
<p>For example:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer lifecycle chaincode approveformyorg --channelID mychannel --channel-config-policy Channel/Application/Admins --name mycc --version 1.0 --package-id mycc_1:3a8c52d70c36313cfebbaf09d8616e7a6318ababa01c7cbe40603c373bcfe173 --sequence 1 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent</span><br></pre></td></tr></table></figure>
<p>If you do not specify a policy, the chaincode definition will use the <code>Channel/Application/Endorsement</code> policy by default, which requires that a transaction be validated by a majority of channel members. This policy depends on the membership of the channel, so it will be updated automatically when organizations are added or removed from a channel. One advantage of using channel policies is that they can be written to be updated automatically with channel membership.</p>
<p>å¦‚æœä½ ä¸æŒ‡å®šèƒŒä¹¦ç­–ç•¥ï¼Œé“¾ç å®šä¹‰ä¼šä½¿ç”¨é»˜è®¤çš„ <code>Channel/Application/Endorsement</code>ç­–ç•¥ï¼Œè¿™ä¸ªç­–ç•¥è¦æ±‚äº¤æ˜“å¿…é¡»ç»è¿‡å¤§å¤šæ•°é€šé“æˆå‘˜çš„éªŒè¯ã€‚è¯¥ç­–ç•¥å–å†³äºé€šé“æˆå‘˜ï¼Œå› æ­¤ä»é€šé“ä¸­æ·»åŠ æˆ–åˆ é™¤ç»„ç»‡æ—¶ï¼Œå®ƒå°†è‡ªåŠ¨æ›´æ–°ã€‚ä½¿ç”¨é€šé“ç­–ç•¥çš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯ï¼Œå¯ä»¥å°†å…¶ç¼–å†™ä¸ºæ ¹æ®é€šé“æˆå‘˜æ•°é‡è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>If you specify an endorsement policy using the <code>--signature-policy</code> flag or the SDK, you will need to update the policy when organizations join or leave the channel. A new organization added to the channel after the chaincode has been defined will be able to query a chaincode (provided the query has appropriate authorization as defined by channel policies and any application level checks enforced by the chaincode) but will not be able to execute or endorse the chaincode. Only organizations listed in the endorsement policy syntax will be able sign transactions.</p>
<p>å¦‚æœä½ ä½¿ç”¨ <code>--signature-policy</code> æ ‡å¿—æˆ–è€…SDKæŒ‡å®šäº†èƒŒä¹¦ç­–ç•¥ï¼Œä½ éœ€è¦åœ¨ç»„ç»‡åŠ å…¥æˆ–è€…ç¦»å¼€é€šé“æ—¶æ›´æ–°è¿™ä¸ªç­–ç•¥ã€‚ä¸€ä¸ªæ–°çš„ç»„ç»‡åœ¨é“¾ç è¢«å®šä¹‰å¥½ä¹‹ååŠ å…¥è¿™ä¸ªé€šé“ï¼Œè¿™ä¸ªç»„ç»‡å¯ä»¥æŸ¥è¯¢è¿™ä¸ªé“¾ç ï¼ˆæä¾›æŸ¥è¯¢å…·æœ‰é€šé“ç­–ç•¥å’Œé“¾ç å¼ºåˆ¶æ‰§è¡Œçš„ä»»ä½•åº”ç”¨ç¨‹åºçº§åˆ«æ£€æŸ¥æ‰€å®šä¹‰çš„é€‚å½“æˆæƒï¼‰ï¼Œä½†æ˜¯ä¸èƒ½å¤Ÿæ‰§è¡Œæˆ–è®¤å¯é“¾ç ã€‚åªæœ‰ç»„ç»‡åœ¨è®¤å¯ç­–ç•¥è¯­æ³•çš„åˆ—è¡¨ä¸­ä¹‹åï¼Œç»„ç»‡æ‰èƒ½ç­¾ç½²äº¤æ˜“ã€‚</p>
<h3 id="ä¸ªäººéªŒè¯">ä¸ªäººéªŒè¯</h3>
<p>chaincodeå¦‚æœä¸è®¾ç½®èƒŒä¹¦ç­–ç•¥ï¼Œåˆ™é»˜è®¤çš„èƒŒä¹¦ç­–ç•¥æ˜¯ï¼š<code> /Channel/Application/Endorsement</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">apple$</span><span class="bash"> peer lifecycle chaincode querycommitted --channelID alljoinchannel --name secured_supply --output json</span></span><br><span class="line">&#123;</span><br><span class="line">	&quot;sequence&quot;: 6,</span><br><span class="line">	&quot;version&quot;: &quot;3.0&quot;,</span><br><span class="line">	&quot;endorsement_plugin&quot;: &quot;escc&quot;,</span><br><span class="line">	&quot;validation_plugin&quot;: &quot;vscc&quot;,</span><br><span class="line">	&quot;validation_parameter&quot;: &quot;EiAvQ2hhbm5lbC9BcHBsaWNhdGlvbi9FbmRvcnNlbWVudA==&quot;,</span><br><span class="line">	&quot;collections&quot;: &#123;&#125;,</span><br><span class="line">	&quot;approvals&quot;: &#123;</span><br><span class="line">		&quot;GylCoreOrg1MSP&quot;: true,</span><br><span class="line">		&quot;GylFOrg1MSP&quot;: true,</span><br><span class="line">		&quot;GylSOrg1MSP&quot;: true,</span><br><span class="line">		&quot;GylSOrg2MSP&quot;: true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®èƒŒä¹¦ç­–ç•¥ä¸º<code>--signature-policy &quot;OR('GylCoreOrg1MSP.peer','GylFOrg1MSP.peer','GylSOrg1MSP.peer','GylSOrg2MSP.peer')&quot;</code>ï¼Œå†æ¬¡æŸ¥è¯¢é“¾ç å®šä¹‰ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">apple$</span><span class="bash"> peer lifecycle chaincode querycommitted --channelID alljoinchannel --name secured_supply --output json</span></span><br><span class="line">&#123;</span><br><span class="line">	&quot;sequence&quot;: 7,</span><br><span class="line">	&quot;version&quot;: &quot;3.0&quot;,</span><br><span class="line">	&quot;endorsement_plugin&quot;: &quot;escc&quot;,</span><br><span class="line">	&quot;validation_plugin&quot;: &quot;vscc&quot;,</span><br><span class="line">	&quot;validation_parameter&quot;: &quot;CmUSFBISCAESAggAEgIIARICCAISAggDGhQSEgoOR3lsQ29yZU9yZzFNU1AQAxoREg8KC0d5bEZPcmcxTVNQEAMaERIPCgtHeWxTT3JnMU1TUBADGhESDwoLR3lsU09yZzJNU1AQAw==&quot;,</span><br><span class="line">	&quot;collections&quot;: &#123;&#125;,</span><br><span class="line">	&quot;approvals&quot;: &#123;</span><br><span class="line">		&quot;GylCoreOrg1MSP&quot;: true,</span><br><span class="line">		&quot;GylFOrg1MSP&quot;: true,</span><br><span class="line">		&quot;GylSOrg1MSP&quot;: true,</span><br><span class="line">		&quot;GylSOrg2MSP&quot;: true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§£ç ä¹‹åï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">e</span><br><span class="line">GylCoreOrg1MSP</span><br><span class="line">GylFOrg1MSP</span><br><span class="line">GylSOrg1MSP</span><br><span class="line">GylSOrg2MSP</span><br></pre></td></tr></table></figure>
<h3 id="Endorsement-policy-syntaxï¼ˆèƒŒä¹¦ç­–ç•¥çš„è¯­æ³•ï¼‰">Endorsement policy syntaxï¼ˆèƒŒä¹¦ç­–ç•¥çš„è¯­æ³•ï¼‰</h3>
<p>As you can see above, policies are expressed in terms of principals (â€œprincipalsâ€ are identities matched to a role). Principals are described as <code>'MSP.ROLE'</code>, where <code>MSP</code> represents the required MSP ID and <code>ROLE</code> represents one of the four accepted roles: <code>member</code>, <code>admin</code>, <code>client</code>, and <code>peer</code>.</p>
<p>æ­£å¦‚æ‚¨åœ¨ä¸Šé¢çœ‹åˆ°çš„é‚£æ ·ï¼Œç­–ç•¥æ˜¯æ ¹æ®ä¸»ä½“è¡¨è¾¾çš„ï¼ˆâ€œä¸»ä½“â€æ˜¯ä¸è§’è‰²åŒ¹é…çš„èº«ä»½ï¼‰ã€‚ä¸»ä½“è¢«æè¿°ä¸º<code>'MSP.ROLE'</code>ï¼Œå…¶ä¸­<code>MSP</code>ä»£è¡¨æ‰€éœ€çš„MSP ID,<code>ROLE</code> ä»£è¡¨å››ä¸ªå…¬è®¤çš„è§’è‰²ä¹‹ä¸€ï¼š<code>member</code>, <code>admin</code>, <code>client</code>ï¼Œå’Œ <code>peer</code>ã€‚</p>
<p>Here are a few examples of valid principals:</p>
<ul>
<li><code>'Org0.admin'</code>: any administrator of the <code>Org0</code> MSP</li>
<li><code>'Org1.member'</code>: any member of the <code>Org1</code> MSP</li>
<li><code>'Org1.client'</code>: any client of the <code>Org1</code> MSP</li>
<li><code>'Org1.peer'</code>: any peer of the <code>Org1</code> MSP</li>
</ul>
<p>The syntax of the language is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPR(E[, E...])</span><br></pre></td></tr></table></figure>
<p>Where <code>EXPR</code> is either <code>AND</code>, <code>OR</code>, or <code>OutOf</code>, and <code>E</code> is either a principal (with the syntax described above) or another nested call to <code>EXPR</code>.</p>
<p><code>EXPR</code> å¯ä»¥ä¸º<code>AND</code>, <code>OR</code>, or <code>OutOf</code>ï¼Œ<code>E</code>å¯ä»¥æ˜¯ä¸€ä¸ªå…·æœ‰ä¸Šé¢è¯­æ³•çš„ä¸»ä½“ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹å¦ä¸€ä¸ª<code>EXPR</code>çš„åµŒå¥—è°ƒç”¨ã€‚</p>
<p>For example:</p>
<ul>
<li>
<p><code>AND('Org1.member', 'Org2.member', 'Org3.member')</code> requests one signature from each of the three principals.</p>
</li>
<li>
<p><code>OR('Org1.member', 'Org2.member')</code> requests one signature from either one of the two principals.</p>
</li>
<li>
<p><code>OR('Org1.member', AND('Org2.member', 'Org3.member'))</code> requests either one signature from a member of the <code>Org1</code> MSP or one signature from a member of the <code>Org2</code> MSP and one signature from a member of the <code>Org3</code> MSP.</p>
</li>
<li>
<p><code>OutOf(1, 'Org1.member', 'Org2.member')</code>, which resolves to the same thing as <code>OR('Org1.member', 'Org2.member')</code>.</p>
</li>
<li>
<p>Similarly, <code>OutOf(2, 'Org1.member', 'Org2.member')</code> is equivalent to <code>AND('Org1.member', 'Org2.member')</code>, and <code>OutOf(2, 'Org1.member', 'Org2.member', 'Org3.member')</code> is equivalent to <code>OR(AND('Org1.member', 'Org2.member'), AND('Org1.member', 'Org3.member'), AND('Org2.member', 'Org3.member'))</code>.</p>
</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><code>AND('Org1.member', 'Org2.member', 'Org3.member')</code> ä¸‰ä¸ªä¸»ä½“éƒ½éœ€è¦è¿›è¡Œç­¾åã€‚</p>
</li>
<li>
<p><code>OR('Org1.member', 'Org2.member')</code> åªéœ€è¦ä¸¤ä¸ªä¸»ä½“çš„å…¶ä¸­ä¸€ä¸ªæä¾›ç­¾åã€‚</p>
</li>
<li>
<p><code>OR('Org1.member', AND('Org2.member', 'Org3.member'))</code> éœ€è¦Org1æä¾›ç­¾åï¼Œæˆ–è€…éœ€è¦Org2å’ŒOrg3åŒæ—¶æä¾›ç­¾åã€‚</p>
</li>
<li>
<p><code>OutOf(1, 'Org1.member', 'Org2.member')</code>, å’Œ <code>OR('Org1.member', 'Org2.member')</code>åšçš„äº‹æƒ…ä¸€æ ·ã€‚</p>
</li>
<li>
<p>ç›¸ä¼¼çš„, <code>OutOf(2, 'Org1.member', 'Org2.member')</code> ä¸ <code>AND('Org1.member', 'Org2.member')</code>ç›¸åŒ</p>
</li>
<li>
<p><code>OutOf(2, 'Org1.member', 'Org2.member', 'Org3.member')</code> ä¸ <code>OR(AND('Org1.member', 'Org2.member'), AND('Org1.member', 'Org3.member'), AND('Org2.member', 'Org3.member'))</code>ç›¸åŒã€‚</p>
</li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a href="/tags/">æ ‡ç­¾</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/guozhe001">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5"><span class="toc-number">1.</span> <span class="toc-text">èƒŒä¹¦ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-chaincode-level-endorsement-policies-%E8%AE%BE%E7%BD%AE%E9%93%BE%E7%A0%81%E7%BA%A7%E5%88%AB%E7%9A%84%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5"><span class="toc-number">1.1.</span> <span class="toc-text">Setting chaincode-level endorsement policies(è®¾ç½®é“¾ç çº§åˆ«çš„èƒŒä¹¦ç­–ç•¥)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E9%AA%8C%E8%AF%81"><span class="toc-number">1.1.1.</span> <span class="toc-text">ä¸ªäººéªŒè¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Endorsement-policy-syntax%EF%BC%88%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5%E7%9A%84%E8%AF%AD%E6%B3%95%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">Endorsement policy syntaxï¼ˆèƒŒä¹¦ç­–ç•¥çš„è¯­æ³•ï¼‰</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&text=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&is_video=false&description=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰&body=Check out this article: https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&title=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&name=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/how_to/Endorsement%20policies%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5/&t=èƒŒä¹¦ç­–ç•¥ï¼ˆEndorsement policiesï¼‰"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2024
    guozhe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a href="/tags/">æ ‡ç­¾</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/guozhe001">é¡¹ç›®</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
