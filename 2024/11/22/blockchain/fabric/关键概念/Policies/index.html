<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="What is a policy At its most basic level, a policy is a set of rules that define the structure for how decisions are made and specific outcomes are reached. To that end, policies typically describe a">
<meta property="og:type" content="article">
<meta property="og:title" content="Policies(策略)">
<meta property="og:url" content="https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/index.html">
<meta property="og:site_name" content="滴水成涓">
<meta property="og:description" content="What is a policy At its most basic level, a policy is a set of rules that define the structure for how decisions are made and specific outcomes are reached. To that end, policies typically describe a">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-2.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-4.png">
<meta property="og:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-6.png">
<meta property="article:published_time" content="2024-11-22T06:32:06.495Z">
<meta property="article:modified_time" content="2024-11-22T06:32:06.495Z">
<meta property="article:author" content="guozhe">
<meta property="article:tag" content="blockchain">
<meta property="article:tag" content="Hyperledger-Fabric">
<meta property="article:tag" content="Policies">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-2.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Policies(策略)</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="滴水成涓" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/guozhe001">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Private%20data/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/The-Ordering-Service/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&text=Policies(策略)"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&is_video=false&description=Policies(策略)"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Policies(策略)&body=Check out this article: https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&name=Policies(策略)&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&t=Policies(策略)"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-a-policy"><span class="toc-number">1.</span> <span class="toc-text">What is a policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-are-policies-needed"><span class="toc-number">2.</span> <span class="toc-text">Why are policies needed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-are-policies-implemented-throughout-Fabric"><span class="toc-number">3.</span> <span class="toc-text">How are policies implemented throughout Fabric</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#System-channel-configuration"><span class="toc-number">3.1.</span> <span class="toc-text">System channel configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-channel-configuration"><span class="toc-number">3.2.</span> <span class="toc-text">Application channel configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Access-control-lists-ACLs"><span class="toc-number">3.3.</span> <span class="toc-text">Access control lists (ACLs)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Smart-contract-endorsement-policies%EF%BC%88%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">Smart contract endorsement policies（智能合约的背书策略）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Modification-policies%EF%BC%88%E4%BF%AE%E6%94%B9%E6%94%BF%E7%AD%96%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">Modification policies（修改政策）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Fabric-policy-domains"><span class="toc-number">4.</span> <span class="toc-text">The Fabric policy domains</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-do-you-write-a-policy-in-Fabric"><span class="toc-number">5.</span> <span class="toc-text">How do you write a policy in Fabric</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Signature-policies"><span class="toc-number">5.1.</span> <span class="toc-text">Signature policies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ImplicitMeta-policies"><span class="toc-number">5.2.</span> <span class="toc-text">ImplicitMeta policies</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#An-example-channel-configuration-policy"><span class="toc-number">6.</span> <span class="toc-text">An example: channel configuration policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fabric-chaincode-lifecycle"><span class="toc-number">7.</span> <span class="toc-text">Fabric chaincode lifecycle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chaincode-endorsement-policies"><span class="toc-number">8.</span> <span class="toc-text">Chaincode endorsement policies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Overriding-policy-definitions"><span class="toc-number">9.</span> <span class="toc-text">Overriding policy definitions</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Policies(策略)
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">guozhe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-11-22T06:32:06.495Z" itemprop="datePublished">2024-11-22</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/">blockchain</a> › <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/">Hyperledger-Fabric</a> › <a class="category-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/Hyperledger-Fabric/Key-Concepts/">Key Concepts</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Hyperledger-Fabric/" rel="tag">Hyperledger-Fabric</a>, <a class="tag-link-link" href="/tags/Policies/" rel="tag">Policies</a>, <a class="tag-link-link" href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" rel="tag">blockchain</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="What-is-a-policy">What is a policy</h2>
<p>At its most basic level, a policy is a set of rules that define the structure for how decisions are made and specific outcomes are reached. To that end, policies typically describe a <strong>who</strong> and a <strong>what</strong>, such as the access or rights that an individual has over an <strong>asset</strong>. We can see that policies are used throughout our daily lives to protect assets of value to us, from car rentals, health, our homes, and many more.</p>
<p>在最基本的级别上，策略是一组规则，这些规则定义了如何制定决策和达到特定结果的结构。为此，策略通常描述<strong>WHO</strong>和<strong>WHAT</strong>，例如个人对<strong>ASSET</strong>的访问或权利。我们可以看到，策略在我们的日常生活中一直被用来保护对我们有价值的资产，使其免受汽车租赁，医疗，房屋等的侵害。</p>
<p>For example, an insurance policy defines the conditions, terms, limits, and expiration under which an insurance payout will be made. The policy is agreed to by the policy holder and the insurance company, and defines the rights and responsibilities of each party.</p>
<p>例如，保险单定义了将要支付保险金的条件，条款，限额和有效期。该保单经保单持有人和保险公司同意，并定义了双方的权利和责任。</p>
<p>Whereas an insurance policy is put in place for risk management, in Hyperledger Fabric, policies are the mechanism for infrastructure management. Fabric policies represent how members come to agreement on accepting or rejecting changes to the network, a channel, or a smart contract. Policies are agreed to by the consortium members when a network is originally configured, but they can also be modified as the network evolves. For example, they describe the criteria for adding or removing members from a channel, change how blocks are formed, or specify the number of organizations required to endorse a smart contract. All of these actions are described by a policy which defines who can perform the action. Simply put, everything you want to do on a Fabric network is controlled by a policy.</p>
<p>尽管已为风险管理制定了保险单，但在Hyperledger Fabric中，风险管理是基础架构管理的机制。Fabric的策略代表成员如何就接受或拒绝对网络，渠道或智能合约的更改达成协议。最初配置网络时，策略是由联盟成员同意的，但是也可以随着网络的发展而修改策略。例如，它们描述了在通道中添加或删除成员，更改区块的形成方式或指定认可智能合约所需的组织数量的标准。所有这些动作均由定义了谁可以执行该动作的策略来描述。简而言之，您要在Fabric网络上执行的所有操作均受策略控制。</p>
<h2 id="Why-are-policies-needed">Why are policies needed</h2>
<p>Policies are one of the things that make Hyperledger Fabric different from other blockchains like Ethereum or Bitcoin. In those systems, transactions can be generated and validated by any node in the network. The policies that govern the network are fixed at any point in time and can only be changed using the same process that governs the code. Because Fabric is a permissioned blockchain whose users are recognized by the underlying infrastructure, those users have the ability to decide on the governance of the network before it is launched, and change the governance of a running network.</p>
<p>策略是使Hyperledger Fabric与以太坊或比特币等其他区块链不同的原因之一。在比特币或以太坊系统中，交易可以由网络上的任意节点生成和验证。支配网络的策略在任何时间都是固定的，并且只能使用支配代码的相同过程进行更改。由于Fabric是许可的区块链，其用户被基础架构所识别，因此这些用户具有在启动网络之前决定网络治理的能力，并且也具有更改运行中网络的治理的能力。</p>
<p>Policies allow members to decide which organizations can access or update a Fabric network, and provide the mechanism to enforce those decisions. Policies contain the lists of organizations that have access to a given resource, such as a user or system chaincode. They also specify how many organizations need to agree on a proposal to update a resource, such as a channel or smart contracts. Once they are written, policies evaluate the collection of signatures attached to transactions and proposals and validate if the signatures fulfill the governance agreed to by the network.</p>
<p>策略允许成员决定哪些组织可以访问或更新一个Fabric网络，并提供执行这些决定的机制。策略包含对给定的资源的有访问权限的组织的列表，比如一个用户或者系统链码。策略还指定有多少组织需要就更新资源（例如通道或智能合约）的提案达成协议。一旦写入，策略将评估附加在交易和提议中的签名的集合，并验证签名是否满足网络所同意的治理。</p>
<h2 id="How-are-policies-implemented-throughout-Fabric">How are policies implemented throughout Fabric</h2>
<p>Policies are implemented at different levels of a Fabric network. Each policy domain governs different aspects of how a network operates.</p>
<p>策略是在Fabric网络的不同级别上实现的。每个策略域管理网络运行的不同方面。</p>
<p><img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-2.png" alt="FabricPolicyHierarchy-2"></p>
<p><em>A visual representation of the Fabric policy hierarchy.</em></p>
<p><em>Fabric策略层次结构的直观表示。</em></p>
<h3 id="System-channel-configuration">System channel configuration</h3>
<p>Every network begins with an ordering <strong>system channel</strong>. There must be exactly one ordering system channel for an ordering service, and it is the first channel to be created. The system channel also contains the organizations who are the members of the ordering service (ordering organizations) and those that are on the networks to transact (consortium organizations).</p>
<p>每个网络都从一个排序系统通道开始。对排序服来说，必须有一个确定的排序系统通道，并且他是第一个需要创建的通道。系统通道还包含作为排序服务成员的组织（排序组织）和在网络上进行交易的组织（联盟组织）。</p>
<p>The policies in the ordering system channel configuration blocks govern the consensus used by the ordering service and define how new blocks are created. The system channel also governs which members of the consortium are allowed to create new channels.</p>
<p>排序系统通道配置区块中的策略控制排序服务使用的共识，并定义如何创建新区块。系统通道也控制联盟中的哪些成员允许创建新的通道。</p>
<h3 id="Application-channel-configuration">Application channel configuration</h3>
<p>Application <em>channels</em> are used to provide a private communication mechanism between organizations in the consortium.</p>
<p>应用程序通道用于在联盟中的组织之间提供专用的通信机制。</p>
<p>The policies in an application channel govern the ability to add or remove members from the channel. Application channels also govern which organizations are required to approve a chaincode before the chaincode is defined and committed to a channel using the Fabric chaincode lifecycle. When an application channel is initially created, it inherits all the ordering service parameters from the orderer system channel by default. However, those parameters (and the policies governing them) can be customized in each channel.</p>
<p>应用程序通道中的策略控制了从通道中添加或者移除成员的能力。应用程序通道也控制了在使用Fabric链码生命周期定义链码并将其提交给通道之前，需要哪些成员需要。最初创建应用程序通道时，默认情况下它将从排序系统通道继承所有排序服务参数。但是，可以在每个通道中自定义这些参数（以及控制它们的策略）。</p>
<h3 id="Access-control-lists-ACLs">Access control lists (ACLs)</h3>
<p>Network administrators will be especially interested in the Fabric use of ACLs, which provide the ability to configure access to resources by associating those resources with existing policies. These “resources” could be functions on system chaincode (e.g., “GetBlockByNumber” on the “qscc” system chaincode) or other resources (e.g.,who can receive Block events). ACLs refer to policies defined in an application channel configuration and extends them to control additional resources. The default set of Fabric ACLs is visible in the <code>configtx.yaml</code> file under the <code>Application: &amp;ApplicationDefaults</code> section but they can and should be overridden in a production environment. The list of resources named in <code>configtx.yaml</code> is the complete set of all internal resources currently defined by Fabric.</p>
<p>网络管理员可能对Fabric使用的AC特别感兴趣，ACL可以通过将资源与现有策略相关联来配置对资源的访问。这些“资源”可以是系统链码上的功能（如，在“ qscc”系统链码上的“ GetBlockByNumber”）或其他资源（如谁可以接收Block事件）。ACL引用在应用程序通道配置中定义的策略，并将其扩展以控制其他资源。默认的Fabric ACL集在<code>configtx.yaml</code>文件里的 <code>Application: &amp;ApplicationDefaults</code> 部分下的可见，但是可以并且应该在生产环境中覆盖它们。<code>configtx.yaml</code>中命名的资源列表是Fabric当前定义的所有内部资源的完整集合。</p>
<p>In that file, ACLs are expressed using the following format:</p>
<p>在该文件中，ACL使用以下格式表示：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ACL policy for chaincode to chaincode invocation</span></span><br><span class="line"><span class="attr">peer/ChaincodeToChaincode:</span> <span class="string">/Channel/Application/Readers</span></span><br></pre></td></tr></table></figure>
<p>Where <code>peer/ChaincodeToChaincode</code> represents the resource being secured and <code>/Channel/Application/Readers</code> refers to the policy which must be satisfied for the associated transaction to be considered valid.</p>
<p>其中 <code>peer/ChaincodeToChaincode</code> 表示受保护的资源， <code>/Channel/Application/Readers</code>是指必须满足的策略，关联交易才被视为有效。</p>
<p>For a deeper dive into ACLS, refer to the topic in the Operations Guide on <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/access_control.html">ACLs</a>.</p>
<p>要深入了解ACLS，请参阅<a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/access_control.html">ACLs</a>的操作指南中的主题。</p>
<h3 id="Smart-contract-endorsement-policies（智能合约的背书策略）">Smart contract endorsement policies（智能合约的背书策略）</h3>
<p>Every smart contract inside a chaincode package has an endorsement policy that specifies how many peers belonging to different channel members need to execute and validate a transaction against a given smart contract in order for the transaction to be considered valid. Hence, the endorsement policies define the organizations (through their peers) who must “endorse” (i.e., approve of) the execution of a proposal.</p>
<p>链码包里面的每个智能合约都有一个背书策略，这个背书策略指定了需要多少个来自不同通道成员的peer节点需要针对给定的智能合约执行和验证交易，以便该交易被视为有效。因此，背书政策定义了必须“背书”（即批准）提案执行的组织（通过其peer）。</p>
<h3 id="Modification-policies（修改政策）">Modification policies（修改政策）</h3>
<p>There is one last type of policy that is crucial to how policies work in Fabric, the <code>Modification policy</code>. Modification policies specify the group of identities required to sign (approve) any configuration <em>update</em>. It is the policy that defines how the policy is updated. Thus, each channel configuration element includes a reference to a policy which governs its modification.</p>
<p>最后一种策略对于Fabric中的策略工作至关重要，即<code>Modification policy</code>。修改策略指定了任何配置更新时需要签名（批准）的一组身份。该策略定义了如何更新策略。因此，每个通道配置元素都包含一个对管理其修改的策略的引用。</p>
<h2 id="The-Fabric-policy-domains">The Fabric policy domains</h2>
<p>While Fabric policies are flexible and can be configured to meet the needs of a network, the policy structure naturally leads to a division between the domains governed by either the Ordering Service organizations or the members of the consortium. In the following diagram you can see how the default policies implement control over the Fabric policy domains below.</p>
<p>虽然Fabric的策略是灵活的，可以配置为满足网络需求，但是策略结构自然会导致由排序服务组织或联盟成员管理的域之间的划分。在下图中你会看到默认策略是如何实现对结构策略域的控制。</p>
<p><img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-4.png" alt="FabricPolicyHierarchy-4"></p>
<p><em>A more detailed look at the policy domains governed by the Orderer organizations and consortium organizations.</em></p>
<p><em>更详细地了解由订购者组织和财团组织管理的策略域。</em></p>
<p>A fully functional Fabric network can feature many organizations with different responsibilities. The domains provide the ability to extend different privileges and roles to different organizations by allowing the founders of the ordering service the ability to establish the initial rules and membership of the consortium. They also allow the organizations that join the consortium to create private application channels, govern their own business logic, and restrict access to the data that is put on the network.</p>
<p>功能齐全的Fabric网络可以使许多个组织承担不同的职责。域通过允许排序服务的创建者建立联盟的初始规则和成员资格的能力来提供将不同的特权和角色扩展到不同组织的能力。域还允许加入该联盟的组织创建私有应用程序通道，管理他们自己的业务逻辑，并限制对网络上放置的数据的访问。</p>
<p>The system channel configuration and a portion of each application channel configuration provides the ordering organizations control over which organizations are members of the consortium, how blocks are delivered to channels, and the consensus mechanism used by the nodes of the ordering service.</p>
<p>系统通道配置和每个应用程序通道配置的一部分为排序组织提供了控制，这些组织可以控制哪些组织是联盟的成员，如何将区块交付到渠道以及排序服务的节点所使用的共识机制。</p>
<p>The system channel configuration provides members of the consortium the ability to create channels. Application channels and ACLs are the mechanism that consortium organizations use to add or remove members from a channel and restrict access to data and smart contracts on a channel.</p>
<p>系统通道提供了哪些联盟的成员有能力创建通道。系统通道和ACL是联盟组织用于在通道中添加或删除成员并限制对通道上数据和智能合约的访问的机制。</p>
<h2 id="How-do-you-write-a-policy-in-Fabric">How do you write a policy in Fabric</h2>
<p>If you want to change anything in Fabric, the policy associated with the resource describes <strong>who</strong> needs to approve it, either with an explicit sign off from individuals, or an implicit sign off by a group. In the insurance domain, an explicit sign off could be a single member of the homeowners insurance agents group. And an implicit sign off would be analogous to requiring approval from a majority of the managerial members of the homeowners insurance group. This is particularly useful because the members of that group can change over time without requiring that the policy be updated. In Hyperledger Fabric, explicit sign offs in policies are expressed using the <code>Signature</code> syntax and implicit sign offs use the <code>ImplicitMeta</code> syntax.</p>
<p>如果要更改Fabric中的任何内容，则与资源相关联的策略描述了谁需要批准它，可以是个人的显示签名，也可以是组的隐式签名。在保险领域，显示签名可以是房主保险代理人组的单个成员。隐式签名类似于要求房主保险集团的大多数管理人员批准。这特别有用，因为该组的成员可以随时间变化而无需更新策略。在Hyperledger Fabric中，策略中的显式签名使用<code>Signature</code>语法表示，而隐式签名使用<code>ImplicitMeta</code>语法。</p>
<h3 id="Signature-policies">Signature policies</h3>
<p><code>Signature</code> policies define specific types of users who must sign in order for a policy to be satisfied such as <code>OR('Org1.peer', 'Org2.peer')</code>. These policies are considered the most versatile because they allow for the construction of extremely specific rules like: “An admin of org A and 2 other admins, or 5 of 6 organization admins”. The syntax supports arbitrary combinations of <code>AND</code>, <code>OR</code> and <code>NOutOf</code>. For example, a policy can be easily expressed by using <code>AND('Org1.member', 'Org2.member')</code> which means that a signature from at least one member in Org1 AND one member in Org2 is required for the policy to be satisfied.</p>
<p><code>Signature</code> 策略定义了必须由指定类型的用户签名才能满足策略，例如 <code>OR('Org1.peer', 'Org2.peer')</code>。这些策略被认为是最通用的，因为它们允许构建极其特定的规则，例如：“组织A的一个管理员和2个其他管理员，或6个组织中的5个管理员”。</p>
<h3 id="ImplicitMeta-policies">ImplicitMeta policies</h3>
<p><code>ImplicitMeta</code> policies are only valid in the context of channel configuration which is based on a tiered hierarchy of policies in a configuration tree. ImplicitMeta policies aggregate the result of policies deeper in the configuration tree that are ultimately defined by Signature policies. They are <code>Implicit</code> because they are constructed implicitly based on the current organizations in the channel configuration, and they are <code>Meta</code> because their evaluation is not against specific MSP principals, but rather against other sub-policies below them in the configuration tree.</p>
<p><code>ImplicitMeta</code> 策略仅在通道配置的上下文中有效，该配置基于配置树中策略的分层层次结构。<code> ImplicitMeta</code>策略将在配置树中更深的策略的结果汇总在一起，这些策略最终由签名策略定义。它们是<code>Implicit</code>的，因为它们是基于渠道配置中的当前组织隐式构造的，之所以称为<code>Meta</code>，是因为它们的评估不是针对特定的MSP主体，而是针对配置树中位于其下方的其他子策略。</p>
<p>The following diagram illustrates the tiered policy structure for an application channel and shows how the <code>ImplicitMeta</code> channel configuration admins policy, named <code>/Channel/Admins</code>, is resolved when the sub-policies named <code>Admins</code> below it in the configuration hierarchy are satisfied where each check mark represents that the conditions of the sub-policy were satisfied.</p>
<p>下图说明了应用程序通道的分层策略结构,并显示名为 <code>/Channel/Admins</code>的 <code>ImplicitMeta</code> 通道配置管理员策略，当满足配置层次结构中位于其下方的名为<code>Admins</code>的子策略时，将解决此问题，其中每个复选标记表示已满足该子策略的条件。</p>
<p><img src="https://hyperledger-fabric.readthedocs.io/en/release-2.2/_images/FabricPolicyHierarchy-6.png" alt="FabricPolicyHierarchy-6"></p>
<p>As you can see in the diagram above, <code>ImplicitMeta</code> policies, Type = 3, use a different syntax, <code>&quot;&lt;ANY|ALL|MAJORITY&gt; &lt;SubPolicyName&gt;&quot;</code>, for example:</p>
<p>如上图所示，<code>ImplicitMeta</code> 策略， Type = 3，使用不同的语法<code>&quot;&lt;ANY|ALL|MAJORITY&gt; &lt;SubPolicyName&gt;&quot;</code>，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;MAJORITY sub policy: Admins&#96;</span><br></pre></td></tr></table></figure>
<p>The diagram shows a sub-policy <code>Admins</code>, which refers to all the <code>Admins</code> policy below it in the configuration tree. You can create your own sub-policies and name them whatever you want and then define them in each of your organizations.</p>
<p>该图显示了一个子策略<code>Admins</code>，它引用配置树中其下方的所有<code>Admins</code>策略。您可以创建自己的子策略，并根据需要命名它们，然后在你的每个组织中对其进行定义。</p>
<p>As mentioned above, a key benefit of an <code>ImplicitMeta</code> policy such as <code>MAJORITY Admins</code> is that when you add a new admin organization to the channel, you do not have to update the channel policy. Therefore <code>ImplicitMeta</code> policies are considered to be more flexible as the consortium members change. The consortium on the orderer can change as new members are added or an existing member leaves with the consortium members agreeing to the changes, but no policy updates are required. Recall that <code>ImplicitMeta</code> policies ultimately resolve the <code>Signature</code> sub-policies underneath them in the configuration tree as the diagram shows.</p>
<p>如上所述，<code>ImplicitMeta</code>策略（例如<code>MAJORITY Admins</code>）的主要优势在于，当您向通道添加新的管理员组织时，不必更新频道策略。因此，随着联盟成员的变化，<code>ImplicitMeta</code>策略被认为更加灵活。当添加新成员或现有成员离开时，排序者上的联盟可以更改，联盟成员同意更改，但是不需要更新策略。回想一下，<code>ImplicitMeta</code>策略最终在配置树中解决了其下方的<code>Signature</code>子策略，如图所示。</p>
<p>You can also define an application level implicit policy to operate across organizations, in a channel for example, and either require that ANY of them are satisfied, that ALL are satisfied, or that a MAJORITY are satisfied. This format lends itself to much better, more natural defaults, so that each organization can decide what it means for a valid endorsement.</p>
<p>您还可以定义一个应用程序级别的隐式策略，以在组织中（例如，在一个通道中）进行操作，并要求满足它们中的任何一个，满足所有条件或满足大多数条件。这种格式适合于更好，更自然的默认设置，以便每个组织可以决定对有效背书的含义。</p>
<p>Further granularity and control can be achieved if you include <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/policies/msp.html#organizational-units"><code>NodeOUs</code></a> in your organization definition. Organization Units (OUs) are defined in the Fabric CA client configuration file and can be associated with an identity when it is created. In Fabric, <code>NodeOUs</code> provide a way to classify identities in a digital certificate hierarchy. For instance, an organization having specific <code>NodeOUs</code> enabled could require that a ‘peer’ sign for it to be a valid endorsement, whereas an organization without any might simply require that any member can sign.</p>
<p>如果在组织定义中包含<code>NodeOU</code>，则可以实现进一步的粒度和控制。组织单位（OU）在Fabric CA客户端配置文件中定义，并且在创建时可以与身份相关联。NodeOU提供了一种在数字证书层次结构中对身份进行分类的方法。例如，启用了特定<code>NodeOU</code>的组织可能要求“peer”标志才能有效地背书，而只有组织而不包含任何其他可能只要求任何成员都可以签名。</p>
<h2 id="An-example-channel-configuration-policy">An example: channel configuration policy</h2>
<p>Understanding policies begins with examining the <code>configtx.yaml</code> where the channel policies are defined. We can use the <code>configtx.yaml</code> file in the Fabric test network to see examples of both policy syntax types. We are going to examine the configtx.yaml file used by the <a target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric-samples/blob/release-2.2/test-network/configtx/configtx.yaml">fabric-samples/test-network</a> sample.</p>
<p>The first section of the file defines the organizations of the network. Inside each organization definition are the default policies for that organization, <code>Readers</code>, <code>Writers</code>, <code>Admins</code>, and <code>Endorsement</code>, although you can name your policies anything you want. Each policy has a <code>Type</code> which describes how the policy is expressed (<code>Signature</code> or <code>ImplicitMeta</code>) and a <code>Rule</code>.</p>
<p>The test network example below shows the Org1 organization definition in the system channel, where the policy <code>Type</code> is <code>Signature</code> and the endorsement policy rule is defined as <code>&quot;OR('Org1MSP.peer')&quot;</code>. This policy specifies that a peer that is a member of <code>Org1MSP</code> is required to sign. It is these signature policies that become the sub-policies that the ImplicitMeta policies point to.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   SECTION: Application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   - This section defines the values to encode into a config transaction or</span></span><br><span class="line"><span class="comment">#   genesis block for application related parameters</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="attr">Application:</span> <span class="meta">&amp;ApplicationDefaults</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Organizations is the list of orgs which are defined as participants on</span></span><br><span class="line">    <span class="comment"># the application side of the network</span></span><br><span class="line">    <span class="attr">Organizations:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Policies defines the set of policies at this level of the config tree</span></span><br><span class="line">    <span class="comment"># For Application policies, their canonical path is</span></span><br><span class="line">    <span class="comment">#   /Channel/Application/&lt;PolicyName&gt;</span></span><br><span class="line">    <span class="attr">Policies:</span></span><br><span class="line">        <span class="attr">Readers:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;ANY Readers&quot;</span></span><br><span class="line">        <span class="attr">Writers:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;ANY Writers&quot;</span></span><br><span class="line">        <span class="attr">Admins:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Admins&quot;</span></span><br><span class="line">        <span class="attr">LifecycleEndorsement:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Endorsement&quot;</span></span><br><span class="line">        <span class="attr">Endorsement:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Endorsement&quot;</span></span><br></pre></td></tr></table></figure>
<p>The next example shows the <code>ImplicitMeta</code> policy type used in the <code>Application</code> section of the <code>configtx.yaml</code>. These set of policies lie on the <code>/Channel/Application/</code> path. If you use the default set of Fabric ACLs, these policies define the behavior of many important features of application channels, such as who can query the channel ledger, invoke a chaincode, or update a channel config. These policies point to the sub-policies defined for each organization. The Org1 defined in the section above contains <code>Reader</code>, <code>Writer</code>, and <code>Admin</code> sub-policies that are evaluated by the <code>Reader</code>, <code>Writer</code>, and <code>Admin</code> <code>ImplicitMeta</code> policies in the <code>Application</code> section. Because the test network is built with the default policies, you can use the example Org1 to query the channel ledger, invoke a chaincode, and approve channel updates for any test network channel that you create.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   SECTION: Application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   - This section defines the values to encode into a config transaction or</span></span><br><span class="line"><span class="comment">#   genesis block for application related parameters</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="attr">Application:</span> <span class="meta">&amp;ApplicationDefaults</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Organizations is the list of orgs which are defined as participants on</span></span><br><span class="line">    <span class="comment"># the application side of the network</span></span><br><span class="line">    <span class="attr">Organizations:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Policies defines the set of policies at this level of the config tree</span></span><br><span class="line">    <span class="comment"># For Application policies, their canonical path is</span></span><br><span class="line">    <span class="comment">#   /Channel/Application/&lt;PolicyName&gt;</span></span><br><span class="line">    <span class="attr">Policies:</span></span><br><span class="line">        <span class="attr">Readers:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;ANY Readers&quot;</span></span><br><span class="line">        <span class="attr">Writers:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;ANY Writers&quot;</span></span><br><span class="line">        <span class="attr">Admins:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Admins&quot;</span></span><br><span class="line">        <span class="attr">LifecycleEndorsement:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Endorsement&quot;</span></span><br><span class="line">        <span class="attr">Endorsement:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Endorsement&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="Fabric-chaincode-lifecycle">Fabric chaincode lifecycle</h2>
<p>In the Fabric 2.0 release, a new chaincode lifecycle process was introduced, whereby a more democratic process is used to govern chaincode on the network. The new process allows multiple organizations to vote on how a chaincode will be operated before it can be used on a channel. This is significant because it is the combination of this new lifecycle process and the policies that are specified during that process that dictate the security across the network. More details on the flow are available in the <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/chaincode_lifecycle.html">Fabric chaincode lifecycle</a> concept topic, but for purposes of this topic you should understand how policies are used in this flow. The new flow includes two steps where policies are specified: when chaincode is <strong>approved</strong> by organization members, and when it is <strong>committed</strong> to the channel.</p>
<p>The <code>Application</code> section of the <code>configtx.yaml</code> file includes the default chaincode lifecycle endorsement policy. In a production environment you would customize this definition for your own use case.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   SECTION: Application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#   - This section defines the values to encode into a config transaction or</span></span><br><span class="line"><span class="comment">#   genesis block for application related parameters</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="attr">Application:</span> <span class="meta">&amp;ApplicationDefaults</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Organizations is the list of orgs which are defined as participants on</span></span><br><span class="line">    <span class="comment"># the application side of the network</span></span><br><span class="line">    <span class="attr">Organizations:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Policies defines the set of policies at this level of the config tree</span></span><br><span class="line">    <span class="comment"># For Application policies, their canonical path is</span></span><br><span class="line">    <span class="comment">#   /Channel/Application/&lt;PolicyName&gt;</span></span><br><span class="line">    <span class="attr">Policies:</span></span><br><span class="line">        <span class="attr">Readers:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;ANY Readers&quot;</span></span><br><span class="line">        <span class="attr">Writers:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;ANY Writers&quot;</span></span><br><span class="line">        <span class="attr">Admins:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Admins&quot;</span></span><br><span class="line">        <span class="attr">LifecycleEndorsement:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Endorsement&quot;</span></span><br><span class="line">        <span class="attr">Endorsement:</span></span><br><span class="line">            <span class="attr">Type:</span> <span class="string">ImplicitMeta</span></span><br><span class="line">            <span class="attr">Rule:</span> <span class="string">&quot;MAJORITY Endorsement&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>The <code>LifecycleEndorsement</code> policy governs who needs to <em>approve a chaincode definition</em>.</p>
<p><code>LifecycleEndorsement</code> 策略管理谁需要批准链码定义</p>
</li>
<li>
<p>The <code>Endorsement</code> policy is the <em>default endorsement policy for a chaincode</em>. More on this below.</p>
<p><code>Endorsement</code>策略是链码的默认背书策略，详情在下面。</p>
</li>
</ul>
<h2 id="Chaincode-endorsement-policies">Chaincode endorsement policies</h2>
<p>The endorsement policy is specified for a <strong>chaincode</strong> when it is approved and committed to the channel using the Fabric chaincode lifecycle (that is, one endorsement policy covers all of the state associated with a chaincode). The endorsement policy can be specified either by reference to an endorsement policy defined in the channel configuration or by explicitly specifying a Signature policy.</p>
<p>在使用Fabric链码生命周期批准链码并将其提交给通道时便指定了链码的背书策略（即，一种背书策略涵盖了与链码相关联的所有状态）。可以通过参考在通道配置中定义的背书策略来指定背书策略，也可以通过显式指定签名策略来指定背书策略。</p>
<p>If an endorsement policy is not explicitly specified during the approval step, the default <code>Endorsement</code> policy <code>&quot;MAJORITY Endorsement&quot;</code> is used which means that a majority of the peers belonging to the different channel members (organizations) need to execute and validate a transaction against the chaincode in order for the transaction to be considered valid. This default policy allows organizations that join the channel to become automatically added to the chaincode endorsement policy. If you don’t want to use the default endorsement policy, use the Signature policy format to specify a more complex endorsement policy (such as requiring that a chaincode be endorsed by one organization, and then one of the other organizations on the channel).</p>
<p>Signature policies also allow you to include <code>principals</code> which are simply a way of matching an identity to a role. Principals are just like user IDs or group IDs, but they are more versatile because they can include a wide range of properties of an actor’s identity, such as the actor’s organization, organizational unit, role or even the actor’s specific identity. When we talk about principals, they are the properties which determine their permissions. Principals are described as ‘MSP.ROLE’, where <code>MSP</code> represents the required MSP ID (the organization), and <code>ROLE</code> represents one of the four accepted roles: Member, Admin, Client, and Peer. A role is associated to an identity when a user enrolls with a CA. You can customize the list of roles available on your Fabric CA.</p>
<p>Some examples of valid principals are:</p>
<ul>
<li>‘Org0.Admin’: an administrator of the Org0 MSP</li>
<li>‘Org1.Member’: a member of the Org1 MSP</li>
<li>‘Org1.Client’: a client of the Org1 MSP</li>
<li>‘Org1.Peer’: a peer of the Org1 MSP</li>
<li>‘OrdererOrg.Orderer’: an orderer in the OrdererOrg MSP</li>
</ul>
<p>There are cases where it may be necessary for a particular state (a particular key-value pair, in other words) to have a different endorsement policy. This <strong>state-based endorsement</strong> allows the default chaincode-level endorsement policies to be overridden by a different policy for the specified keys.</p>
<p>For a deeper dive on how to write an endorsement policy refer to the topic on <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/endorsement-policies.html">Endorsement policies</a> in the Operations Guide.</p>
<p><strong>Note:</strong> Policies work differently depending on which version of Fabric you are using:</p>
<ul>
<li>In Fabric releases prior to 2.0, chaincode endorsement policies can be updated during chaincode instantiation or by using the chaincode lifecycle commands. If not specified at instantiation time, the endorsement policy defaults to “any member of the organizations in the channel”. For example, a channel with “Org1” and “Org2” would have a default endorsement policy of “OR(‘Org1.member’, ‘Org2.member’)”.</li>
<li>Starting with Fabric 2.0, Fabric introduced a new chaincode lifecycle process that allows multiple organizations to agree on how a chaincode will be operated before it can be used on a channel. The new process requires that organizations agree to the parameters that define a chaincode, such as name, version, and the chaincode endorsement policy.</li>
</ul>
<h2 id="Overriding-policy-definitions">Overriding policy definitions</h2>
<p>Hyperledger Fabric includes default policies which are useful for getting started, developing, and testing your blockchain, but they are meant to be customized in a production environment. You should be aware of the default policies in the <code>configtx.yaml</code> file. Channel configuration policies can be extended with arbitrary verbs, beyond the default <code>Readers, Writers, Admins</code> in <code>configtx.yaml</code>. The orderer system and application channels are overridden by issuing a config update when you override the default policies by editing the <code>configtx.yaml</code> for the orderer system channel or the <code>configtx.yaml</code> for a specific channel.</p>
<p>See the topic on <a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/config_update.html#updating-a-channel-configuration">Updating a channel configuration</a> for more information.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/guozhe001">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-a-policy"><span class="toc-number">1.</span> <span class="toc-text">What is a policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-are-policies-needed"><span class="toc-number">2.</span> <span class="toc-text">Why are policies needed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-are-policies-implemented-throughout-Fabric"><span class="toc-number">3.</span> <span class="toc-text">How are policies implemented throughout Fabric</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#System-channel-configuration"><span class="toc-number">3.1.</span> <span class="toc-text">System channel configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-channel-configuration"><span class="toc-number">3.2.</span> <span class="toc-text">Application channel configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Access-control-lists-ACLs"><span class="toc-number">3.3.</span> <span class="toc-text">Access control lists (ACLs)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Smart-contract-endorsement-policies%EF%BC%88%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%83%8C%E4%B9%A6%E7%AD%96%E7%95%A5%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">Smart contract endorsement policies（智能合约的背书策略）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Modification-policies%EF%BC%88%E4%BF%AE%E6%94%B9%E6%94%BF%E7%AD%96%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">Modification policies（修改政策）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Fabric-policy-domains"><span class="toc-number">4.</span> <span class="toc-text">The Fabric policy domains</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-do-you-write-a-policy-in-Fabric"><span class="toc-number">5.</span> <span class="toc-text">How do you write a policy in Fabric</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Signature-policies"><span class="toc-number">5.1.</span> <span class="toc-text">Signature policies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ImplicitMeta-policies"><span class="toc-number">5.2.</span> <span class="toc-text">ImplicitMeta policies</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#An-example-channel-configuration-policy"><span class="toc-number">6.</span> <span class="toc-text">An example: channel configuration policy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fabric-chaincode-lifecycle"><span class="toc-number">7.</span> <span class="toc-text">Fabric chaincode lifecycle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chaincode-endorsement-policies"><span class="toc-number">8.</span> <span class="toc-text">Chaincode endorsement policies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Overriding-policy-definitions"><span class="toc-number">9.</span> <span class="toc-text">Overriding policy definitions</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&text=Policies(策略)"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&is_video=false&description=Policies(策略)"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Policies(策略)&body=Check out this article: https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&title=Policies(策略)"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&name=Policies(策略)&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://guozhe001.github.io/2024/11/22/blockchain/fabric/%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5/Policies/&t=Policies(策略)"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020-2024
    guozhe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/guozhe001">项目</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
